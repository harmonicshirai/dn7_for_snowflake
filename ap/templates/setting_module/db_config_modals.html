<!-- CSV -->
<div
    class="modal fade db-modal"
    id="modal-db-csv"
    tabindex="-1"
    role="dialog"
    aria-labelledby="CSVSelectedLabel"
    aria-hidden="true"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title" id="CSVSelectedLabel">{{ _("CSV Import Config") }}</h4>
                </div>
                {{ macros.polling_frequency_option('CSV', polling_frequency, is_authorized) }}
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group row mb-0">
                    <div class="col-sm-12">
                        {{ macros.alert_message("alertMsgCheckFolder") }}
                        {{ macros.alert_message("alertInternalError") }}
                        {{ macros.alert_message("alert-msg-csvDbname", on_top=True) }}
                    </div>
                </div>
                <div class="form-group row">
                    <label for="csvDBSourceName" class="col-sm-3 col-form-label"
                        ><h5>{{ _("Data Source Name") }}</h5>
                    </label>
                    <div class="col-sm-6">
                        <input
                            type="text"
                            name="csvDBSourceName"
                            class="form-control"
                            id="csvDBSourceName"
                            data-observer
                        />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="csvComment" class="col-sm-3 col-form-label"><h5>{{ _("Comment") }}</h5></label>
                    <div class="col-sm-6">
                        <input type="text" name="csvComment" class="form-control" id="csvComment" data-observer />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="folderUrl" class="col-sm-3 col-form-label"><h5>{{ _("Source") }}</h5></label>
                    <div class="col-sm-6">
                        <input
                            type="text"
                            name="folderUrl"
                            class="form-control already-convert-hankaku"
                            id="folderUrl"
                            placeholder="Z:\path\to\directory"
                            data-observer
                        />
                        <input type="hidden" id="isFilePath" data-observer />
                    </div>
                    <div class="col-sm-3 text-left">
                        <button class="btn btn-primary" id="connectResourceBtn">{{ _("Connect") }}</button>
                    </div>
                </div>
                <div class="form-group row" id="v2ProcessDiv" style="display: none;">
                    <label for="v2ProcessSelection" class="col-sm-3 col-form-label">
                        <h5 title="{{ _('Select V2 Process') }}">
                            <span class="hint-text">{{ _("V2 Process") }}</span>
                        </h5>
                    </label>
                    <div class="col-sm-6" id="v2ProcessSelection"></div>
                </div>
                <div class="form-group row">
                    <label for="optionalFunction" class="col-sm-3 col-form-label">
                        <h5 title="{{ _('Optional function Hover') }}">
                            <span class="hint-text">{{ _("Optional function") }}</span>
                        </h5>
                    </label>
                    <div class="col-sm-6">
                        <select
                            type="select"
                            name="optionalFunction"
                            class="form-control select2-selection--single"
                            id="optionalFunction"
                            data-observer
                        >
                            <option value="">{{ _("---") }}</option>
                            {% for script in etl_scripts %}
                                <option value="{{ script }}">{{ script }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-group row">
                    <label for="" class="col-sm-3 col-form-label"><h5>{{ _("File type") }}</h5></label>
                    <div class="col-sm-6 file-type-area">
                        <div class="row" style="padding: 0 15px">
                            <div class="mb-2">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input
                                        type="radio"
                                        class="custom-control-input"
                                        id="fileTypeAuto"
                                        name="fileType"
                                        value="Auto"
                                        data-observer
                                    />
                                    <label class="custom-control-label" for="fileTypeAuto">Auto</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input
                                        type="radio"
                                        class="custom-control-input"
                                        id="fileTypeCSV"
                                        name="fileType"
                                        value="CSV"
                                        data-observer
                                    />
                                    <label class="custom-control-label" for="fileTypeCSV">CSV</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input
                                        type="radio"
                                        class="custom-control-input"
                                        id="fileTypeTSV"
                                        name="fileType"
                                        value="TSV"
                                        data-observer
                                    />
                                    <label class="custom-control-label" for="fileTypeTSV">TSV</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input
                                        type="radio"
                                        class="custom-control-input"
                                        id="fileTypeSMC"
                                        name="fileType"
                                        value="SMC"
                                        data-observer
                                    />
                                    <label class="custom-control-label" for="fileTypeSMC">Semicolon(;)SV</label>
                                </div>
                            </div>
                            <div class="flex-grow-1 import-config-file-row">
                                <div
                                    class="custom-control custom-checkbox custom-control-inline float-right transpose-div"
                                >
                                    <input
                                        type="checkbox"
                                        class="custom-control-input already-convert-hankaku"
                                        id="csvIsTranspose"
                                        name="csvIsTranspose"
                                        data-observer
                                    />
                                    <label
                                        class="custom-control-label"
                                        for="csvIsTranspose"
                                        title="{{ _('Transpose hover msg') }}"
                                        >{{ _('Transpose') }}</label
                                    >
                                </div>
                                <div class="custom-control custom-control-inline float-right line-skip-group nrows-div">
                                    <label
                                        class="line-skip mr-2 mb-0"
                                        title="{{ _('Num rows hover msg') }}"
                                        for="csvNRows"
                                    >
                                        <span class="hint-text">nRows</span>
                                    </label>
                                    <input
                                        type="number"
                                        id="csvNRows"
                                        name="csvNRows"
                                        class="form-control csvNRows"
                                        min="0"
                                        data-observer=""
                                    />
                                </div>
                                <div class="custom-control custom-control-inline float-right line-skip-group skip-div">
                                    <label
                                        class="line-skip mr-2 mb-0"
                                        title="{{ _('Skip line hover msg') }}"
                                        for="skipHead"
                                    >
                                        <span class="hint-text">Skip</span>
                                    </label>
                                    <input
                                        type="number"
                                        id="skipHead"
                                        name="skip_head"
                                        class="form-control"
                                        min="0"
                                        max="99"
                                        data-observer=""
                                    />
                                    <input type="hidden" name="isDummyHeader" value="" />
                                    <input type="hidden" name="isFileChecker" value="" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group row mg-minus-1">
                    <label class="col-sm-3 col-form-label"
                        ><h5 title="{{ _('Specify datatype of columns Hover') }}">
                            <span class="hint-text">{{ _("Specify datatype of columns") }}</span>
                        </h5></label
                    >
                    <div class="col-sm-6">
                        <div class="file-encoding" id="dbsEncoding"></div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-3">
                        <button class="btn btn-primary" id="showResources">{{ _("Show") }}</button>
                    </div>
                    <div class="col-sm-6 text-wrap">
                        <div id="resourceLoading" class="spinner-border text-primary hide" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                        <span id="fileName" style="word-break: break-all; display: none;"></span>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-12">
                        <div id="csvDataTable" class="table-responsive" style="display: none;">
                            <input id="skipTail" value="" hidden />
                            <table class="table bg-secondary table-striped table-hover table-hover-light" name="" id="">
                                <thead class="thead-dark">
                                    <tr></tr>
                                </thead>
                                <tbody class="table-info table-active"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button
                    type="button"
                    onclick="saveCSVInfo();"
                    class="btn btn-secondary saveDBInfoBtn"
                    data-csv="1"
                    data-item-id=""
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>
<div id="CSVConfirmModal" class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-confirm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{ _("Confirmation") }}</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <p id="csvConfirmModalMsg" class="modal-inform" style="white-space: pre-line"></p>
            </div>
            <br />
            <div class="modal-footer">
                <button id="csvConfirmRegister" class="btn btn-primary" data-item-id="">{{ _("OK") }}</button>
                <button class="btn btn-secondary" data-dismiss="modal">{{ _("Cancel") }}</button>
            </div>
        </div>
    </div>
</div>
<!-- SQLITE -->
<div
    class="modal fade db-modal"
    id="modal-db-sqlite"
    tabindex="-1"
    role="dialog"
    aria-labelledby="DBSelectedLabel"
    aria-hidden="true"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title" id="DBSelectedLabel">
                        {{ _("Config") }}: <span id="DBTypeModal">SQLite</span>
                    </h4>
                </div>
                {{ macros.polling_frequency_option('SQLITE', polling_frequency, is_authorized) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    {{ macros.alert_message("alert-sqlite-validation") }}
                    <form id="sqliteCfgForm">
                        <div class="form-group row">
                            <label for="sqlite_dbsourcename" class="col-sm-3 col-form-label"
                                ><h5>{{ _("Data Source Name") }}</h5></label
                            >
                            <div class="col-sm-9">
                                <input
                                    type="text"
                                    name="sqlite_dbsourcename"
                                    class="form-control"
                                    id="sqlite_dbsourcename"
                                />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="sqlite_comment" class="col-sm-3 col-form-label"
                                ><h5>{{ _("Comment") }}</h5></label
                            >
                            <div class="col-sm-9">
                                <input type="text" name="sqlite_comment" class="form-control" id="sqlite_comment" />
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="sqlite_dbname" class="col-sm-3 col-form-label"
                                ><h5>{{ _("File name") }}</h5></label
                            >
                            <div class="col-sm-9">
                                <input
                                    type="text"
                                    name="sqlite_dbname"
                                    class="form-control already-convert-hankaku"
                                    id="sqlite_dbname"
                                />
                            </div>
                        </div>
                        {{ macros.input_hidden("sqlite_use_os_timezone", "", "sqlite_use_os_timezone") }}
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                {{ macros.check_db_connection_message('sqlite', '#form-control-file [name="sqlite_dbname"]', 'btn-test-db-conn-sqlite', 'msg-test-db-conn-sqlite') }}

                <button
                    id=""
                    type="button"
                    onclick="saveDBInfo(this);"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    data-submit-btn="true"
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>
<!-- MSSQL -->
<div
    class="modal fade db-modal"
    id="modal-db-mssqlserver"
    tabindex="-1"
    role="dialog"
    aria-labelledby="MSSQLSelectedLabel"
    aria-hidden="true"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title" id="MSSQLSelectedLabel">{{ _("Config") }}: MSSQL Server</h4>
                </div>
                {{ macros.polling_frequency_option('MSSQLSERVER', polling_frequency, is_authorized) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" name="modal-body-input">
                {{ macros.alert_message("alert-mssqlserver-validation") }}
                <form id="mssqlCfgForm">
                    {{ macros.input_row("mssqlserver_dbsourcename", _("Data Source Name")) }}

                    {{ macros.input_row("mssqlserver_comment", _("Comment")) }}

                    {{ macros.input_row("mssqlserver_host", _("Host name") + " (" + _("IP Address") + ")") }}

                    {{ macros.input_row("mssqlserver_port", _("Port number"), value='1433', type='number') }}

                    {{ macros.input_row("mssqlserver_dbname", _("Database Name")) }}

                    {{ macros.input_row("mssqlserver_schema", _("Schema"), value='dbo') }}

                    {{ macros.input_row("mssqlserver_username", _("User name")) }}

                    {{ macros.input_row("mssqlserver_password", _("Password"), type='password') }}

                    {{ macros.input_hidden("mssqlserver_use_os_timezone", "", "mssqlserver_use_os_timezone") }}

                    {{ macros.input_hidden("mssqlserver_id", "", "mssqlserver_id") }}
                </form>
            </div>
            <div class="modal-footer">
                {{ macros.check_db_connection_message('mssqlserver', '#modal-db-mssqlserver div[name="modal-body-input"]', 'btn-test-db-conn-mssqlserver', 'msg-test-db-conn-mssqlserver') }}
                <button
                    id=""
                    type="button"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    onclick="saveDBInfo(this);"
                    data-submit-btn="true"
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>
<!-- POSTGRESQL -->
<div
    class="modal fade db-modal"
    id="modal-db-postgresql"
    tabindex="-1"
    role="dialog"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title">{{ _("Config") }}: PostgreSQL</h4>
                </div>
                {{ macros.polling_frequency_option('POSTGRESQL', polling_frequency, is_authorized) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" name="modal-body-input">
                {{ macros.alert_message("alert-postgresql-validation") }}
                <form id="postgresCfgForm">
                    {{ macros.input_row("postgresql_dbsourcename", _("Data Source Name")) }}

                    {{ macros.input_row("postgresql_comment", _("Comment")) }}

                    {{ macros.input_row("postgresql_host", _("Host name") + " (" + _("IP Address") + ")") }}

                    {{ macros.input_row("postgresql_port", _("Port number"), value='5432') }}

                    {{ macros.input_row("postgresql_dbname", _("Database Name")) }}

                    {{ macros.input_row("postgresql_schema", _("Schema"), value='public') }}

                    {{ macros.input_row("postgresql_username", _("User name")) }}

                    {{ macros.input_row("postgresql_password", _("Password"), type='password') }}

                    {{ macros.input_hidden("postgresql_use_os_timezone", "", "postgresql_use_os_timezone") }}

                    {{ macros.input_hidden("postgresql_id", "", "postgresql_id") }}
                </form>
            </div>

            <div class="modal-footer">
                {{ macros.check_db_connection_message('postgresql', '#modal-db-postgresql div[name="modal-body-input"]', 'btn-test-db-conn-psql', 'msg-test-db-conn-psql') }}

                <button
                    id=""
                    type="button"
                    onclick="saveDBInfo(this);"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    data-submit-btn="true"
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Oracle -->
<div
    class="modal fade db-modal"
    id="modal-db-oracle"
    tabindex="-1"
    role="dialog"
    aria-labelledby="OracleSelectedLabel"
    aria-hidden="true"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title" id="OracleSelectedLabel">{{ _("Config") }}: Oracle</h4>
                </div>
                {{ macros.polling_frequency_option('ORACLE', polling_frequency, is_authorized) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" name="modal-body-input">
                {{ macros.alert_message("alert-oracle-validation") }}
                <form id="oracleCfgForm">
                    {{ macros.input_row("oracle_dbsourcename", _("Data Source Name")) }}

                    {{ macros.input_row("oracle_comment", _("Comment")) }}

                    {{ macros.input_row("oracle_host", _("Host name") + " (" + _("IP Address") + ")") }}

                    {{ macros.input_row("oracle_port", _("Port number"), value='', type='number') }}

                    {{ macros.input_row("oracle_dbname", _("Database Name")) }}

                    {{ macros.input_row("oracle_username", _("User name")) }}

                    {{ macros.input_row("oracle_password", _("Password"), type='password') }}

                    {{ macros.input_hidden("oracle_use_os_timezone", "", "oracle_use_os_timezone") }}

                    {{ macros.input_hidden("oracle_id", "", "oracle_id") }}
                </form>
            </div>
            <div class="modal-footer">
                {{ macros.check_db_connection_message('oracle', '#modal-db-oracle div[name="modal-body-input"]', 'btn-test-db-conn-oracle', 'msg-test-db-conn-oracle') }}
                <button
                    id=""
                    type="button"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    onclick="saveDBInfo(this);"
                    data-submit-btn="true"
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>
<!-- MySQL -->
<div
    class="modal fade db-modal"
    id="modal-db-mysql"
    tabindex="-1"
    role="dialog"
    aria-labelledby="MySQLSelectedLabel"
    aria-hidden="true"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title" id="MySQLSelectedLabel">{{ _("Config") }}: MySQL</h4>
                </div>
                {{ macros.polling_frequency_option('MYSQL', polling_frequency, is_authorized) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" name="modal-body-input">
                {{ macros.alert_message("alert-mysql-validation") }}
                <form id="mysqlCfgForm">
                    {{ macros.input_row("mysql_dbsourcename", _("Data Source Name")) }}

                    {{ macros.input_row("mysql_comment", _("Comment")) }}

                    {{ macros.input_row("mysql_host", _("Host name") + " (" + _("IP Address") + ")") }}

                    {{ macros.input_row("mysql_port", _("Port number"), value='1433', type='number') }}

                    {{ macros.input_row("mysql_dbname", _("Database Name")) }}

                    {{ macros.input_row("mysql_username", _("User name")) }}

                    {{ macros.input_row("mysql_password", _("Password"), type='password') }}

                    {{ macros.input_hidden("mysql_use_os_timezone", "", "mysql_use_os_timezone") }}

                    {{ macros.input_hidden("mysql_id", "", "mysql_id") }}
                </form>
            </div>
            <div class="modal-footer">
                {{ macros.check_db_connection_message('mysql', '#modal-db-mysql div[name="modal-body-input"]', 'btn-test-db-conn-mysql', 'msg-test-db-conn-mysql') }}
                <button
                    id=""
                    type="button"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    onclick="saveDBInfo(this);"
                    data-submit-btn="true"
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>

<!-- SOFTWARE WORKSHOP -->
<div
    class="modal fade db-modal"
    id="modal-db-postgres_software_workshop"
    tabindex="-1"
    role="dialog"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog" role="document" style="max-width: 910px">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title">{{ _("Config") }}: {{ _("Software Workshop (on-premise)") }}</h4>
                </div>
                {{ macros.polling_frequency_option('POSTGRES_SOFTWARE_WORKSHOP', polling_frequency, is_authorized) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" aria-label="Close" onclick="handleCloseDSConfigModal(this)">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body h-100" name="modal-body-input">
                {{ macros.alert_message("alert-postgres_software_workshop-validation") }}
                <div class="d-flex align-items-end">
                    <form id="softwareWorkshopCfgForm" class="mr-2 mb-2">
                        {{ macros.input_row("postgres_software_workshop_dbsourcename", _("Data Source Name"), label_block_cnt=4, input_block_cnt=8) }}
                        {{ macros.input_row("postgres_software_workshop_comment", _("Comment"), label_block_cnt=4, input_block_cnt=8) }}
                        <div class="d-flex flex-row justify-content-between">
                            <div class="">
                                {{ macros.input_row("postgres_software_workshop_host", _("Host name") + " (" + _("IP Address") + ")", label_block_cnt=7, input_block_cnt=5) }}
                                {{ macros.input_row("postgres_software_workshop_dbname", _("Database Name"), label_block_cnt=7, input_block_cnt=5) }}
                                {{ macros.input_row("postgres_software_workshop_username", _("User name"), label_block_cnt=7, input_block_cnt=5) }}
                            </div>
                            <div class="">
                                {{ macros.input_row("postgres_software_workshop_port", _("Port number"), value='5432', label_block_cnt=5, input_block_cnt=7) }}
                                {{ macros.input_row("postgres_software_workshop_schema", _("Schema"), value='public', label_block_cnt=5, input_block_cnt=7) }}
                                {{ macros.input_row("postgres_software_workshop_password", _("Password"), type='password', label_block_cnt=5, input_block_cnt=7) }}
                            </div>
                        </div>
                        {{ macros.input_hidden("postgres_software_workshop_use_os_timezone", "", "postgres_software_workshop_use_os_timezone") }}
                        {{ macros.input_hidden("postgres_software_workshop_id", "", "postgres_software_workshop_id") }}
                    </form>
                    <div
                        class="d-flex flex-wrap flex-column align-items-center position-relative"
                        style="margin-bottom: 1.1rem;"
                    >
                        {{ macros.preview_software_workshop('postgres_software_workshop', '#modal-db-postgres_software_workshop div[name="modal-body-input"]', 'btn-test-db-conn-postgres_software_workshop', 'msg-test-db-conn-postgres_software_workshop') }}
                    </div>
                </div>
                <div id="lineGroupContainer" style="display: none">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1" style="margin-right: 0.7rem !important">
                            {{ macros.single_selectbox('lineGrps',_("softwareWorkshopPreviewLineGrpLabel"),{},1,4,8, multiple_cols=false) }}
                        </div>
                        <div style="width: 125px"></div>
                    </div>
                    <div class="d-flex align-items-start justify-content-center">
                        <label style="white-space: pre; padding: 5px 15px 5px"
                            >{{ _('softwareWorkshopPreviewChildEqLabel') }}</label
                        >
                        <div id="groupTable"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button
                    id=""
                    type="button"
                    onclick="saveDBInfo()"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    data-submit-btn="true"
                    {% if not is_authorized %}
                        disabled
                    {% endif %}
                >
                    {{ _("OK") }}
                </button>
                <button
                    id=""
                    type="button"
                    onclick="showSoftwareWorkshopConfirmationModal();"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    data-submit-btn="true"
                >
                    {{ _("registerProcessButton") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this);">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>
{% include 'db_modals/snowflake.html' %}
<!-- SNOWFLAKE SOFTWARE WORKSHOP -->
<div
    class="modal fade db-modal"
    id="modal-db-snowflake_software_workshop"
    tabindex="-1"
    role="dialog"
    data-backdrop="static"
    data-keyboard="false"
>
    <div class="modal-dialog modal-snowflake" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="col-md">
                    <h4 class="modal-title">{{ _("Config") }}: {{ _("DataSourceTypeSoftwareWorkshopSnowflake") }}</h4>
                </div>
                {{ macros.polling_frequency_option('SNOWFLAKE_SOFTWARE_WORKSHOP', polling_frequency, is_authorized, [0, 60, 1440]) }}
                <button
                    type="button"
                    class="btn btn-outline-secondary ml-2"
                    data-toggle="modal"
                    data-target="#advancedDSModal"
                >
                    Advanced
                </button>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body h-100" name="modal-body-input">
                {{ macros.alert_message("alert-snowflake_software_workshop-validation") }}
                <div class="d-flex align-items-end">
                    <form id="snowflakeSWCfgForm" class="mr-2 mb-2 flex-grow-1">
                        {{ macros.input_row("snowflake_software_workshop_dbsourcename", _("Data Source Name"), label_block_cnt=4, input_block_cnt=8, input_class='pl-0') }}
                        {{ macros.input_row("snowflake_software_workshop_comment", _("Comment"), label_block_cnt=4, input_block_cnt=8, input_class='pl-0') }}
                        {{ macros.input_row("snowflake_software_workshop_pull_from", _("Import From (UTC)"), label_block_cnt=4, input_block_cnt=8, input_class='pl-0', id="snowflake_software_workshop_pull_from", placeholder="YYYY-MM-DD") }}
                        <div class="d-flex flex-row justify-content-end">
                            <div class="flex-grow-1">
                                {{ macros.input_row("snowflake_software_workshop_host", _("Host name") + " (" + _("IP Address") + ")", label_block_cnt=7, input_block_cnt=5, label_class='p-0') }}
                                {{ macros.input_row("snowflake_software_workshop_dbname", _("Database Name"), label_block_cnt=7, input_block_cnt=5,label_class='p-0') }}
                                {{ macros.input_row("snowflake_software_workshop_username", _("User name"), label_block_cnt=7, input_block_cnt=5,label_class='p-0') }}
                                {{ macros.input_row("snowflake_software_workshop_role", _("RoleLabel"), label_block_cnt=7, input_block_cnt=5,label_class='p-0') }}
                            </div>
                            <div class="flex-grow-1">
                                {{ macros.input_row("snowflake_software_workshop_port", _("Port number"), value='5432', label_block_cnt=5, input_block_cnt=7, label_class='p-0') }}
                                {{ macros.input_row("snowflake_software_workshop_schema", _("Schema"), value='public', label_block_cnt=5, input_block_cnt=7, label_class='p-0') }}
                                {{ macros.input_row("snowflake_software_workshop_warehouse", _("WarehouseLabel"), label_block_cnt=5, input_block_cnt=7,label_class='p-0') }}
                            </div>
                            {{ macros.input_hidden("snowflake_software_workshop_id", "", "snowflake_software_workshop_id") }}
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-4 col-form-label label-right"
                                ><h5>{{ _("SnowflakeAuthTypeLabel") }}</h5></label
                            >
                            <div class="col-sm-8 pl-0">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input
                                        type="radio"
                                        class="custom-control-input"
                                        id="snowflakeSWAuthAccessToken"
                                        name="snowflakeSWAuthType"
                                        value="access_token"
                                        onchange="switchAuthTypeDisplay(this, 'SNOWFLAKE_SOFTWARE_WORKSHOP')"
                                        data-observer
                                    />
                                    <label class="custom-control-label" for="snowflakeSWAuthAccessToken"
                                        >{{ _("AccessTokenRadioLabel") }}</label
                                    >
                                    <a
                                        class="ml-2"
                                        target="_blank"
                                        href="https://docs.snowflake.com/en/user-guide/programmatic-access-tokens#generating-a-programmatic-access-token"
                                        ><i class="fa fa-external-link-alt"></i
                                    ></a>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input
                                        type="radio"
                                        class="custom-control-input"
                                        id="snowflakeSWAuthKeypair"
                                        name="snowflakeSWAuthType"
                                        value="keypair"
                                        onchange="switchAuthTypeDisplay(this, 'SNOWFLAKE_SOFTWARE_WORKSHOP')"
                                        data-observer
                                    />
                                    <label class="custom-control-label" for="snowflakeSWAuthKeypair"
                                        >{{ _("KeypairRadioLabel") }}</label
                                    >
                                    <a
                                        class="ml-2"
                                        target="_blank"
                                        href="https://docs.snowflake.com/en/user-guide/key-pair-auth#configuring-key-pair-authentication"
                                        ><i class="fa fa-external-link-alt"></i
                                    ></a>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div id="inputSWAreaAccessTokenType" class="flex-grow-1" style="display: block;">
                                {{ macros.input_row("snowflake_software_workshop_access_token", _("SnowflakeAccessTokenLabel"), type='password', label_block_cnt=4, input_block_cnt=8, margin_bottom_class='mb-0', input_class='pl-0') }}
                            </div>
                            <div id="inputSWAreaKeypairType" class="flex-column flex-grow-1" style="display: none;">
                                {{ macros.input_row("snowflake_software_workshop_private_key_file", _("SnowflakePrivateKeyFilePathLabel"), value='', label_block_cnt=4, input_block_cnt=8, input_class='pl-0') }}
                                {{ macros.input_row("snowflake_software_workshop_private_key_file_pwd", _("SnowflakePrivateKeyFilePwdLabel"), type='password', label_block_cnt=4, input_block_cnt=8, margin_bottom_class='mb-0', input_class='pl-0') }}
                            </div>
                        </div>
                        {{ macros.input_hidden("snowflake_software_workshop_use_os_timezone", "", "snowflake_software_workshop_use_os_timezone") }}
                    </form>
                    <div
                        class="d-flex flex-wrap flex-column align-items-center position-relative"
                        style="margin-bottom: 8px;"
                    >
                        {{ macros.preview_software_workshop('snowflake_software_workshop', '#modal-db-snowflake_software_workshop div[name="modal-body-input"]', 'btn-test-db-conn-snowflake_software_workshop', 'msg-test-db-conn-snowflake_software_workshop') }}
                    </div>
                </div>
                <div id="lineGroupContainer" style="display: none">
                    <div class="d-flex align-items-center">
                        <div class="flex-grow-1" style="margin-right: 0.7rem !important">
                            {{ macros.single_selectbox('lineGrps',_("softwareWorkshopPreviewLineGrpLabel"),{},1,4,8, multiple_cols=false) }}
                        </div>
                        <div style="width: 125px"></div>
                    </div>
                    <div class="d-flex align-items-start justify-content-center">
                        <label style="white-space: pre; padding: 5px 15px 5px"
                            >{{ _('softwareWorkshopPreviewChildEqLabel') }}</label
                        >
                        <div id="groupTable"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button
                    id=""
                    type="button"
                    onclick="saveDBInfo()"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    data-submit-btn="true"
                >
                    {{ _("OK") }}
                </button>
                <button
                    id=""
                    type="button"
                    onclick="showSoftwareWorkshopConfirmationModal();"
                    class="btn btn-primary saveDBInfoBtn"
                    data-item-id=""
                    data-submit-btn="true"
                >
                    {{ _("registerProcessButton") }}
                </button>
                <button type="button" class="btn btn-secondary" onclick="handleCloseDSConfigModal(this)">
                    {{ _("Cancel") }}
                </button>
            </div>
        </div>
    </div>
</div>

<div id="deleteDSModal" class="modal fade in" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-confirm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{ _("Confirmation") }}</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <p class="modal-inform">{{ _('Do you want to delete this record?') }}</p>
            </div>
            <div class="modal-footer">
                <button
                    id="btnDeleteDS"
                    onclick="confirmDeleteDS();"
                    class="btn btn-danger"
                    data-item-id=""
                    data-dismiss="modal"
                >
                    {{ _('Delete') }}
                </button>
                <button class="btn btn-secondary" data-dismiss="modal">{{ _('Cancel') }}</button>
            </div>
        </div>
    </div>
</div>
<div id="advancedDSModal" class="modal fade in" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-confirm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{ _('Advanced Setting') }}</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            </div>
            <div class="modal-body">
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="useOSTZOption" checked />
                    <label class="custom-control-label" for="useOSTZOption"
                        >{{ _('Force to OS locale time zone.') }}</label
                    >
                </div>
            </div>
            <div class="modal-footer">
                <button
                    id="useOSTZConfirmBtn"
                    onclick="updateOSTimezone();"
                    class="btn btn-primary"
                    data-item-id=""
                    data-dismiss="modal"
                >
                    {{ _('OK') }}
                </button>
                <button class="btn btn-secondary" onclick="revertOSTimezone('advancedDSModal');">
                    {{ _('Cancel') }}
                </button>
            </div>
        </div>
    </div>
</div>
